
# Generic error handling with logging and redirection
# All errors are logged and redirected to a user-friendly error page
# Use absolute path from document root (works on both XAMPP and live server)
# IMPORTANT: Must be defined BEFORE IP blocking to catch 403 errors

ErrorDocument 400 /error-handler.php?code=400&url=%{REQUEST_URI}
ErrorDocument 401 /error-handler.php?code=401&url=%{REQUEST_URI}
ErrorDocument 403 /error-handler.php?code=403&url=%{REQUEST_URI}
ErrorDocument 404 /error-handler.php?code=404&url=%{REQUEST_URI}
ErrorDocument 500 /error-handler.php?code=500&url=%{REQUEST_URI}
ErrorDocument 502 /error-handler.php?code=502&url=%{REQUEST_URI}
ErrorDocument 503 /error-handler.php?code=503&url=%{REQUEST_URI}

# Allow access to error handler and error page for everyone (even blocked IPs)
<FilesMatch "^(error-handler|error)\.php$">
    Require all granted
</FilesMatch>

# Blocked IPs - Managed by Admin Panel
<RequireAll>
    Require all granted
        </RequireAll>
# End Blocked IPs
